# 指标问题分类报告

## 一、注册与实例化问题
1. **Enhanced系列指标**
   - 错误：'EnhancedTRIX'/'EnhancedKDJ'等对象缺少'indicator_type'属性
   - 原因：增强型指标未正确继承基类属性
   - 相关文件：indicators/factory.py

2. **KC/DMA指标**
   - 错误：No module named 'data.model'
   - 原因：缺少数据模型依赖或路径配置错误
   - 相关文件：indicators/kc.py, indicators/dma.py

3. **CMO指标**
   - 错误：无法导入find_peaks
   - 原因：signal_utils缺少峰值检测函数
   - 相关文件：utils/signal_utils.py

## 二、数据完整性问题
1. **通用列缺失**
   - 错误：缺少open/high/low/close/volume等基础列
   - 影响指标：ChipDistribution/ElliottWave/EMV等23个指标
   - 典型日志：
     [ERROR] indicators.base_indicator: 输入数据缺少所需的列: high, low, close

2. **特殊列缺失**
   - BIAS指标：缺少bias列
   - ZXM系列指标：缺少capital(资金数据)
   - 典型日志：
     [ERROR] analysis.buypoints.auto_indicator_analyzer: BIAS形态分析错误: 输入数据缺少所需的列: bias

## 三、形态分析方法问题
1. **AD指标**
   - 错误：'numpy.bool' object has no attribute 'iloc'
   - 原因：get_patterns返回布尔值而非Series
   - 相关文件：indicators/ad.py
     ```
     # 修改建议
     def get_patterns(self, data: pd.DataFrame, **kwargs) -> pd.DataFrame:
         # 返回DataFrame而不是布尔列表
     ```

2. **RSI/MTM/ROC指标**
   - 错误：'dict' object has no attribute 'replace'
   - 原因：模式识别结果格式不一致
   - 相关文件：analysis/buypoints/auto_indicator_analyzer.py

## 四、方法参数问题
1. **DIVERGENCE指标**
   - 错误：calculate() missing 1 required positional argument: 'indicator_name'
   - 原因：未传递必要参数
   - 相关文件：indicators/divergence.py

2. **ZXMDIAGNOSTICS指标**
   - 错误：缺少_analyze_volatility_health方法
   - 原因：诊断方法未实现
   - 相关文件：indicators/zxm/diagnostics.py

## 五、数据验证问题
1. **ZXMMARKETBREADTH指标**
   - 错误：要求多层索引DataFrame
   - 原因：输入数据格式不匹配
   - 相关文件：indicators/zxm/market_breadth.py

2. **TIME CYCLE ANALYSIS**
   - 警告：数据长度不足(需要504个点)
   - 影响：周期分析可靠性降低
   - 相关文件：indicators/time_cycle_analysis.py

## 六、工厂注册问题
1. **GENERIC_CONDITION**
   - 错误：Columns must be same length as key
   - 原因：指标注册时列对齐失败
   - 相关文件：indicators/factory.py

2. **空白指标**
   - 错误：无法解析空表达式
   - 原因：公式指标配置异常
   - 相关文件：indicators/formula_indicators.py